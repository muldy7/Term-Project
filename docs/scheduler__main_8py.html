<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME-405 Term Project: src/scheduler_main.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME-405 Term Project<span id="projectnumber">&#160;0.3.4</span>
   </div>
   <div id="projectbrief">The following documented code implements a thermal imaging Nerf turret that is able to spin around, find, and shoot thermal targets for the ME-405 Term Project.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('scheduler__main_8py.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">scheduler_main.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file contains our main code to set-up the scheduler to run our robot.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3b8331c032672744972a0f115e5ea937" id="r_a3b8331c032672744972a0f115e5ea937"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3b8331c032672744972a0f115e5ea937">scheduler_main.task1_fun</a> (shares)</td></tr>
<tr class="memdesc:a3b8331c032672744972a0f115e5ea937"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task that controls the motion of the robot using the motor controlling the pan axis and the servo to pull the trigger.  <br /></td></tr>
<tr class="separator:a3b8331c032672744972a0f115e5ea937"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01c4cb7f861f0bee089129effd8cebe6" id="r_a01c4cb7f861f0bee089129effd8cebe6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a01c4cb7f861f0bee089129effd8cebe6">scheduler_main.task2_fun</a> (shares)</td></tr>
<tr class="memdesc:a01c4cb7f861f0bee089129effd8cebe6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task for taking a picture.  <br /></td></tr>
<tr class="separator:a01c4cb7f861f0bee089129effd8cebe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a06f670a3f864b183bface4f4e1df4024" id="r_a06f670a3f864b183bface4f4e1df4024"><td class="memItemLeft" align="right" valign="top"><a id="a06f670a3f864b183bface4f4e1df4024" name="a06f670a3f864b183bface4f4e1df4024"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>scheduler_main.camera_setpoint</b> = task_share.Share('f', thread_protect=False, name=&quot;Camera Setpoint Share&quot;)</td></tr>
<tr class="separator:a06f670a3f864b183bface4f4e1df4024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a210f0c154402c5a909538f93fa65eb58" id="r_a210f0c154402c5a909538f93fa65eb58"><td class="memItemLeft" align="right" valign="top"><a id="a210f0c154402c5a909538f93fa65eb58" name="a210f0c154402c5a909538f93fa65eb58"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>scheduler_main.image_flag</b> = task_share.Share('h', thread_protect=False, name=&quot;Image Flag Share&quot;)</td></tr>
<tr class="separator:a210f0c154402c5a909538f93fa65eb58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1a86a543232cc8b20eb5856adc401aa" id="r_af1a86a543232cc8b20eb5856adc401aa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af1a86a543232cc8b20eb5856adc401aa">scheduler_main.task1</a></td></tr>
<tr class="separator:af1a86a543232cc8b20eb5856adc401aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0d91b0f9cbc79b4234d2fc6c7977b51" id="r_ac0d91b0f9cbc79b4234d2fc6c7977b51"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac0d91b0f9cbc79b4234d2fc6c7977b51">scheduler_main.task2</a></td></tr>
<tr class="separator:ac0d91b0f9cbc79b4234d2fc6c7977b51"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains our main code to set-up the scheduler to run our robot. </p>
<p>Although we were able use this file to run our code cooperatively, we found that the non scheduled code worked better for the competition. This scheduled code breaks the function into two tasks, the Thermal Camera Task and The Robot Controller Task.</p>
<dl class="section author"><dt>Author</dt><dd>JR Ridgely, Abe Muldrow, Lucas Rambo, Peter Tomson </dd></dl>
<dl class="section date"><dt>Date</dt><dd>February 29, 2024 </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>(c) 2015-2021 by JR Ridgely and released under the GNU Public License, Version 2. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a3b8331c032672744972a0f115e5ea937" name="a3b8331c032672744972a0f115e5ea937"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b8331c032672744972a0f115e5ea937">&#9670;&#160;</a></span>task1_fun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">scheduler_main.task1_fun </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>shares</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task that controls the motion of the robot using the motor controlling the pan axis and the servo to pull the trigger. </p>
<p>The task uses the share for the image_flag value and new values of camera_error used in the control loop. Each camera_error tells the device a new location to spin to for finding the target. This task sets image_flag to 1 initially so no pictures are taken, then sets to zero every time the device has moved to the new setpoint. This allows the device to move multiple times and adjust before FREEZE is called. After 5 seconds has passed the code then transitions to pull the trigger.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shares</td><td>A list holding the share and queue used by this task </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a01c4cb7f861f0bee089129effd8cebe6" name="a01c4cb7f861f0bee089129effd8cebe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01c4cb7f861f0bee089129effd8cebe6">&#9670;&#160;</a></span>task2_fun()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">scheduler_main.task2_fun </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>shares</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task for taking a picture. </p>
<p>The task takes a picture every time the image_flag from the share is 0. The camera then sets the flag to 1 to tell the control task that there is a new image with a camera_error value for moving the device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shares</td><td>A tuple of a share and queue from which this task gets data </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af1a86a543232cc8b20eb5856adc401aa" name="af1a86a543232cc8b20eb5856adc401aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1a86a543232cc8b20eb5856adc401aa">&#9670;&#160;</a></span>task1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">scheduler_main.task1</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  cotask.Task(task1_fun, name=<span class="stringliteral">&quot;Motor and Servo Control&quot;</span>, priority=1, period=5,    <span class="comment"># could be much lower for our loop depending on precision</span></div>
<div class="line"><span class="lineno">    2</span>                        profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>, shares=(image_flag, camera_setpoint))</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0d91b0f9cbc79b4234d2fc6c7977b51" name="ac0d91b0f9cbc79b4234d2fc6c7977b51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0d91b0f9cbc79b4234d2fc6c7977b51">&#9670;&#160;</a></span>task2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">scheduler_main.task2</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  cotask.Task(task2_fun, name=<span class="stringliteral">&quot;Thermal Camera Imager&quot;</span>, priority=2, period=100, <span class="comment"># should experiment with the period</span></div>
<div class="line"><span class="lineno">    2</span>                        profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>, shares=(image_flag, camera_setpoint))</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="scheduler__main_8py.html">scheduler_main.py</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
